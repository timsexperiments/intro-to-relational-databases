# Homework 12: Subqueries

## Objectives

- Practice writing scalar, multi-row, and correlated subqueries
- Use subqueries in `WHERE`, `FROM`, and `SELECT` clauses
- Compare subquery approaches with equivalent `JOIN`s
- Understand when subqueries are necessary vs. when a `JOIN` is better

## Instructions

Write a SQL script (`hw12.sql`) that answers the following questions using your existing **library schema** and test data from previous homeworks.  
For each question, include a comment with the question number and a brief description.

### Questions

1. **Books More Expensive Than Average**

   - Find all books whose price is greater than the average price of all books.
   - Use a scalar subquery in the `WHERE` clause.

2. **Members Who Have Checked Out Books**

   - List the names and emails of all members who have checked out at least one book.
   - Use a multi-row subquery with `IN`.

3. **Members With No Checkouts**

   - List the names of all members who have never checked out a book.
   - Use a subquery with `NOT IN` or `NOT EXISTS`.

4. **Most Recent Checkout Per Member**

   - For each member, show their name and the date of their most recent checkout.
   - Use a correlated subquery in the `SELECT` clause.

5. **Books With Reviews**

   - List all book titles that have at least one review.
   - Use an `EXISTS` subquery.

6. **Average Rating Per Book (Subquery in FROM)**

   - For each book, show its title and average rating.
   - Use a subquery in the `FROM` clause (derived table).

7. **Compare JOIN vs Subquery**
   - Write two queries that return the same result:
     - All members who have written at least one review.
     - One query should use a subquery, the other should use a `JOIN`.

## Submission

- Save your SQL queries in a file named `hw12.sql`.
- Place the file in:  
  `submissions/homework_12/<your-github-username>/`
- Submit a pull request as described in the [submissions README](../submissions/README.md).

## Example Directory Structure

```
submissions/
homework_12/
your-github-username/
hw12.sql
```

## Tips

- Use comments (`--`) to label each query.
- Use `EXPLAIN` to see how MySQL executes your subqueries vs. joins.
- Remember:
  - Scalar subqueries must return exactly one value.
  - Multi-row subqueries can be used with `IN`, `NOT IN`, `EXISTS`, `ANY`, `ALL`.
  - Correlated subqueries run once per row of the outer query.
- If you get stuck, review Lesson 12 or ask for help!
